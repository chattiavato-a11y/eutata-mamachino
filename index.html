<!doctype html>
<html lang="es" data-theme="dark">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Chat ¬∑ Local-first con respaldo WebGPU</title>
<link rel="stylesheet" href="styles.css" />

<body>
  <div class="wrap">
    <header>
      <div>
        <h1 data-i18n="header.title">Interfaz de chat OPS</h1>
      </div>
      <div class="toggles" role="group" aria-label="Ajustes de visualizaci√≥n e idioma">
        <label for="themeBtn" class="muted" data-i18n="controls.themeLabel">Tema</label>
        <button id="themeBtn" type="button" aria-pressed="true" data-action="toggle-theme" data-i18n-attrs="aria-label:controls.themeDark">Oscuro</button>
        <label for="langSel" class="muted" data-i18n="controls.languageLabel">Idioma</label>
        <select id="langSel" aria-label="Selector de idioma" data-action="select-language">
          <option value="en" data-i18n="language.option.en">Ingl√©s</option>
          <option value="es" selected data-i18n="language.option.es">Espa√±ol</option>
        </select>
      </div>
    </header>

    <main>
      <section aria-labelledby="chat-title">
        <div class="policy-card">
          <h2 id="chat-title" data-i18n="chat.title">Consola de sesi√≥n</h2>
          <form id="chatForm" novalidate>
            <div id="chat" class="chat" role="log" aria-live="polite"></div>
            <div class="bar">
              <label class="visually-hidden" for="input" data-i18n="controls.inputLabel">Mensaje de chat</label>
              <textarea id="input" placeholder="Escribe un mensaje‚Ä¶" aria-label="Entrada de mensaje" data-i18n-attrs="placeholder:controls.placeholder,aria-label:controls.inputLabel"></textarea>
              <button id="micBtn" type="button" class="mic-btn" aria-pressed="false" aria-label="Iniciar entrada de voz" title="Iniciar entrada de voz" disabled>
                <span aria-hidden="true">üé§</span>
                <span class="visually-hidden" data-role="mic-label">Iniciar entrada de voz</span>
              </button>
              <button id="send" type="submit" data-i18n="controls.send">Enviar</button>
            </div>
            <div class="muted" id="status" role="status" aria-live="polite" data-i18n="status.idle">Listo.</div>
            <div class="muted" id="voiceStatus" role="status" aria-live="polite"></div>
            <div class="bad" id="warn" role="alert"></div>
            <div class="session-meters" id="usageMeters" aria-live="polite">
              <div class="session-meter" id="tokenMeter" role="status">
                <span class="muted" data-i18n="controls.tokensLabel">Uso de tokens</span>
                <progress id="tokenProgress" value="0" max="1" aria-label="Uso de tokens"></progress>
                <span class="session-meter-value" id="tokenValue">0</span>
              </div>
              <div class="session-meter hidden" id="minuteMeter" role="status">
                <span class="muted">Minutos</span>
                <progress id="minuteProgress" value="0" max="1" aria-label="Uso de minutos"></progress>
                <span class="session-meter-value" id="minuteValue">0</span>
              </div>
            </div>
          </form>
        </div>
      </section>

    </main>

    <footer>
      <nav class="footer-links" aria-label="Pol√≠ticas de cumplimiento y avisos legales">
        <button
          type="button"
          class="footer-link"
          data-dialog-target="cookieDialog"
          aria-haspopup="dialog"
          aria-expanded="false"
          data-i18n="footer.cookieLink"
        >Consentimiento de cookies</button>
        <button
          type="button"
          class="footer-link"
          data-dialog-target="termsDialog"
          aria-haspopup="dialog"
          aria-expanded="false"
          data-i18n="footer.termsLink"
        >T√©rminos y condiciones</button>
        <button
          type="button"
          class="footer-link"
          data-dialog-target="rightsDialog"
          aria-haspopup="dialog"
          aria-expanded="false"
          data-i18n="footer.rightsLink"
        >Marcas registradas y derechos de autor</button>
      </nav>
      <p class="footer-copy" id="footerCopy"></p>
    </footer>
  </div>

  <dialog id="cookieDialog" class="policy-dialog" aria-labelledby="cookieDialogTitle">
    <form method="dialog" class="policy-dialog__content">
      <header>
        <h2 id="cookieDialogTitle" data-i18n="dialogs.cookie.title">Consentimiento de cookies</h2>
        <button
          type="submit"
          class="dialog-close"
          value="close"
          aria-label="Cerrar"
          data-dialog-close
          data-i18n-attrs="aria-label:dialogs.close"
        >√ó</button>
      </header>
      <p data-i18n="dialogs.cookie.body1">Solo implementamos cookies esenciales necesarias para asegurar la sesi√≥n, detectar abusos y recordar tus preferencias de accesibilidad. Las anal√≠ticas son agregadas, an√≥nimas y nunca incluyen identificadores personales.</p>
      <p data-i18n="dialogs.cookie.body2">Tu contenido de chat permanece local por defecto a menos que una pol√≠tica lo escale a infraestructura protegida. Rechazar las cookies opcionales mantiene la experiencia funcional sin personalizaci√≥n.</p>
    </form>
  </dialog>

  <dialog id="termsDialog" class="policy-dialog" aria-labelledby="termsDialogTitle">
    <form method="dialog" class="policy-dialog__content">
      <header>
        <h2 id="termsDialogTitle" data-i18n="dialogs.terms.title">T√©rminos y condiciones</h2>
        <button
          type="submit"
          class="dialog-close"
          value="close"
          aria-label="Cerrar"
          data-dialog-close
          data-i18n-attrs="aria-label:dialogs.close"
        >√ó</button>
      </header>
      <p data-i18n="dialogs.terms.body1">Al utilizar este asistente aceptas seguir las reglas de uso permitido, abstenerte de enviar datos maliciosos o regulados y respetar todas las marcas de confidencialidad que produzca el sistema.</p>
      <p data-i18n="dialogs.terms.body2">El servicio se ofrece ‚Äútal cual‚Äù, sin garant√≠as. Los objetivos de disponibilidad siguen las pr√°cticas operativas de PCI DSS y las disputas se rigen por las leyes aplicables de tu jurisdicci√≥n.</p>
    </form>
  </dialog>

  <dialog id="rightsDialog" class="policy-dialog" aria-labelledby="rightsDialogTitle">
    <form method="dialog" class="policy-dialog__content">
      <header>
        <h2 id="rightsDialogTitle" data-i18n="dialogs.rights.title">Marcas registradas y derechos de autor</h2>
        <button
          type="submit"
          class="dialog-close"
          value="close"
          aria-label="Cerrar"
          data-dialog-close
          data-i18n-attrs="aria-label:dialogs.close"
        >√ó</button>
      </header>
      <p id="rightsPrimary">¬© <span id="copyrightYear"></span> ShieldOps Consortium. Todos los derechos reservados. ShieldOps, el emblema Shield y las marcas relacionadas est√°n protegidos.</p>
      <p data-i18n="dialogs.rights.body2">Se proh√≠be la reproducci√≥n, redistribuci√≥n o modificaci√≥n no autorizada de los activos de la plataforma. Los nombres de terceros siguen siendo propiedad de sus respectivos due√±os y se mencionan solo para identificaci√≥n.</p>
    </form>
  </dialog>

<script src="./shield.js" defer></script>
<script src="./i18n.js" defer></script>
<script type="module" src="./main.js"></script>
</body>
</html>
