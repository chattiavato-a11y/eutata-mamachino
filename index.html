<!doctype html>
<html lang="en" data-theme="dark">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Chat ¬∑ Local-first with WebGPU fallback</title>
<link rel="stylesheet" href="styles.css" />

<body>
  <div class="wrap">
    <header>
      <div>
        <h1 data-i18n="header.title">OPS Chat Interface</h1>
      </div>
      <div class="toggles" role="group" aria-label="Display and language settings">
        <label for="themeBtn" class="muted" data-i18n="controls.themeLabel">Theme</label>
        <button id="themeBtn" type="button" aria-pressed="true" data-action="toggle-theme" data-i18n-attrs="aria-label:controls.themeDark">Dark</button>
        <label for="langSel" class="muted" data-i18n="controls.languageLabel">Language</label>
        <select id="langSel" aria-label="Language selector" data-action="select-language">
          <option value="en" selected data-i18n="language.option.en">English</option>
          <option value="es" data-i18n="language.option.es">Espa√±ol</option>
        </select>
      </div>
    </header>

    <main>
      <section aria-labelledby="chat-title">
        <div class="policy-card">
          <h2 id="chat-title">Session Console</h2>
          <form id="chatForm" novalidate>
            <div id="chat" class="chat" role="log" aria-live="polite"></div>
            <div class="bar">
              <label class="visually-hidden" for="input" data-i18n="controls.inputLabel">Chat message</label>
              <textarea id="input" placeholder="Type a message‚Ä¶" aria-label="Message input" data-i18n-attrs="placeholder:controls.placeholder,aria-label:controls.inputLabel"></textarea>
              <button id="micBtn" type="button" class="mic-btn" aria-pressed="false" aria-label="Start voice input" disabled>
                <span aria-hidden="true">üé§</span>
                <span class="visually-hidden">Start voice input</span>
              </button>
              <button id="send" type="submit" data-i18n="controls.send">Send</button>
            </div>
            <div class="muted" id="status" role="status" aria-live="polite" data-i18n="status.idle">Ready.</div>
            <div class="bad" id="warn" role="alert"></div>
            <div class="session-meters" id="usageMeters" aria-live="polite">
              <div class="session-meter" id="tokenMeter" role="status">
                <span class="muted" data-i18n="controls.tokensLabel">Token use</span>
                <progress id="tokenProgress" value="0" max="1" aria-label="Token usage"></progress>
                <span class="session-meter-value" id="tokenValue">0</span>
              </div>
              <div class="session-meter hidden" id="minuteMeter" role="status">
                <span class="muted">Minutes</span>
                <progress id="minuteProgress" value="0" max="1" aria-label="Minute usage"></progress>
                <span class="session-meter-value" id="minuteValue">0</span>
              </div>
            </div>
          </form>
        </div>
      </section>

    </main>

    <footer>
      <nav class="footer-links" aria-label="Compliance policies and legal notices">
        <button type="button" class="footer-link" data-dialog-target="cookieDialog">Cookie Consent</button>
        <button type="button" class="footer-link" data-dialog-target="termsDialog">Terms &amp; Conditions</button>
        <button type="button" class="footer-link" data-dialog-target="rightsDialog">Trademark &amp; Copyright</button>
      </nav>
      <p class="footer-copy" id="footerCopy"></p>
    </footer>
  </div>

  <dialog id="cookieDialog" class="policy-dialog" aria-labelledby="cookieDialogTitle">
    <form method="dialog" class="policy-dialog__content">
      <header>
        <h2 id="cookieDialogTitle">Cookie Consent</h2>
        <button type="submit" class="dialog-close" value="close" aria-label="Close" data-dialog-close>√ó</button>
      </header>
      <p>We only deploy essential cookies required to secure the session, detect abuse, and remember your accessibility preferences. Analytics are aggregated, anonymous, and never include personal identifiers.</p>
      <p>Your chat content remains local-first unless policy escalates it to protected infrastructure. Declining optional cookies keeps the experience functional without personalization.</p>
    </form>
  </dialog>

  <dialog id="termsDialog" class="policy-dialog" aria-labelledby="termsDialogTitle">
    <form method="dialog" class="policy-dialog__content">
      <header>
        <h2 id="termsDialogTitle">Terms &amp; Conditions</h2>
        <button type="submit" class="dialog-close" value="close" aria-label="Close" data-dialog-close>√ó</button>
      </header>
      <p>By engaging with this assistant you agree to follow acceptable use rules, refrain from submitting malicious or regulated data, and respect all confidentiality markings produced by the system.</p>
      <p>Service is provided on an ‚Äúas-is‚Äù basis without warranties. Availability targets follow PCI DSS operational practices and disputes are governed by the applicable laws of your jurisdiction.</p>
    </form>
  </dialog>

  <dialog id="rightsDialog" class="policy-dialog" aria-labelledby="rightsDialogTitle">
    <form method="dialog" class="policy-dialog__content">
      <header>
        <h2 id="rightsDialogTitle">Trademark &amp; Copyright</h2>
        <button type="submit" class="dialog-close" value="close" aria-label="Close" data-dialog-close>√ó</button>
      </header>
      <p>&copy; <span id="copyrightYear"></span> ShieldOps Consortium. All rights reserved. ShieldOps, the Shield insignia, and related marks are protected trademarks.</p>
      <p>Unauthorized reproduction, redistribution, or modification of platform assets is prohibited. Third-party names remain the property of their respective owners and are referenced solely for identification.</p>
    </form>
  </dialog>

<script src="./shield.js" defer></script>
<script src="./i18n.js" defer></script>
<script type="module" src="./main.js"></script>
</body>
</html>
